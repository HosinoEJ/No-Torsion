<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NO TORSION - 信息採集</title>
    <link rel="stylesheet" href="/css/form.css">
</head>
<body>

<div class="container">
    <h1>NO TORSION FORM</h1>
    <p style="text-align: center; color: #666;">記錄黑暗，是為了迎接光亮</p>

    <form action="/submit" method="POST" id="mainForm">
        <h3>基礎資訊</h3>
        
        <div class="form-group">
            <label class="required">年齡</label>
            <input type="number" name="age" min="1" max="100" placeholder="請輸入年齡" required>
        </div>

        <div class="form-group">
            <label class="required">性別</label>
            <select name="sex" id="sexSelect" required onchange="toggleOtherSex()">
                <option value="" disabled selected>請選擇</option>
                <option value="男">男</option>
                <option value="女">女</option>
                <option value="MtF">MtF</option>
                <option value="FtM">FtM</option>
                <option value="__other_option__">其他</option>
            </select>
            <input type="text" id="otherSexInput" name="sex_other" class="other-input" placeholder="請註明您的性別">
        </div>

        <div class="form-group">
            <label class="required">省份</label>
            <select name="province" required>
                <option value="" disabled selected>選擇省份</option>
                <option value="山東">山東</option>
                <option value="河南">河南</option>
                <option value="河北">河北</option>
                <option value="山西">山西</option>
                <option value="遼寧">遼寧</option>
                <option value="吉林">吉林</option>
                <option value="黑龍江">黑龍江</option>
                <option value="江蘇">江蘇</option>
                <option value="浙江">浙江</option>
                <option value="安徽">安徽</option>
                <option value="福建">福建</option>
                <option value="江西">江西</option>
                <option value="湖北">湖北</option>
                <option value="湖南">湖南</option>
                <option value="廣東">廣東</option>
                <option value="海南">海南</option>
                <option value="四川">四川</option>
                <option value="貴州">貴州</option>
                <option value="雲南">雲南</option>
                <option value="陝西">陝西</option>
                <option value="甘肅">甘肅</option>
                <option value="青海">青海</option>
                <option value="內蒙古">內蒙古</option>
                <option value="廣西">廣西</option>
                <option value="西藏">西藏</option>
                <option value="寧夏">寧夏</option>
                <option value="新疆">新疆</option>
                <option value="北京">北京</option>
                <option value="天津">天津</option>
                <option value="上海">上海</option>
                <option value="重慶">重慶</option>
                <option value="香港">香港</option>
                <option value="澳門">澳門</option>
                <option value="臺灣（ROC）">臺灣</option>
                <option value="海外">海外</option>
            </select>
        </div>

        <div class="form-group">
            <label class="required">區、縣</label>
            <input type="text" name="city" placeholder="例如：濰坊市" required>
        </div>

        <div class="form-group">
            <label class="required">學校名稱</label>
            <input type="text" name="school_name" placeholder="請填寫完整名稱" required>
        </div>

        <div class="form-group">
            <label>學校地址</label>
            <input type="text" name="school_address" placeholder="若已知，請詳細填寫">
        </div>

        <h3>您的經歷</h3>

        <div class="form-group">
            <label class="required">入學日期</label>
            <input type="date" name="date_start" id="date_start" required>
        </div>

        <div class="form-group">
            <label>離開日期</label>
            <input type="date" name="date_end" id="date_end">
            <div class="hint">若目前仍在校，可不填</div>
        </div>

        <div class="form-group">
            <label>經歷描述</label>
            <textarea name="experience" rows="4" placeholder="請描述您在該校的日常生活、管理方式等..."></textarea>
        </div>

        <h3>曝光資訊</h3>

        <div class="form-group">
            <label>負責人/校長姓名</label>
            <input type="text" name="headmaster_name" placeholder="姓名">
        </div>

        <div class="form-group">
            <label class="required">學校聯繫方式</label>
            <input type="text" rows="3" name="contact_information" placeholder="電話、郵箱或地址" required>
        </div>

        <div class="form-group">
            <label>已知醜聞</label>
            <textarea name="scandal" rows="3" placeholder="如體罰、非法拘禁、虛假宣傳等內容..."></textarea>
        </div>

        <div class="form-group">
            <label>其他補充</label>
            <input type="text" rows="3" name="other" placeholder="任何您想補充的信息">
        </div>

        <button type="submit">確認並提交信息</button>
    </form>
</div>

<script>
    // 性別「其他」顯示邏輯
    function toggleOtherSex() {
        const select = document.getElementById('sexSelect');
        const otherInput = document.getElementById('otherSexInput');
        if (select.value === '__other_option__') {
            otherInput.style.display = 'block';
            otherInput.required = true;
        } else {
            otherInput.style.display = 'none';
            otherInput.required = false;
        }
    }

    // 簡單的日期邏輯校驗
    document.getElementById('mainForm').onsubmit = function(e) {
        const start = document.getElementById('date_start').value;
        const end = document.getElementById('date_end').value;
        if (end && start && new Date(end) < new Date(start)) {
            alert('離開日期不能早於入學日期');
            return false;
        }
        return true;
    };
</script>

</body>
</html>